rooms:
  # -------- start --------------
  - name: intro
    states:
      - name: default
        imageUrl: asylum/shots/slice/title.jpg
        buttons:
          - "Tap OK to continue|ok|ğŸ†—"

    actions:
      - match: ^(begin|ok|ğŸ†—) # .* match anything
        then:
          goto: home

  # -------- home --------------
  - name: home
    states:
      - name: default
        imageUrl: asylum/shots/slice/fb-ad.jpg
        long: "You accept an invitation to playtest a new physical escape room. The setting of the game is a mental asylum called 'Bell Hill'.
          Having signed the gameâ€™s standard NDA, you climb into bed early Friday night, full of anticipation.

          \n After all, you _*love*_ escape rooms."
        buttons:
          - "get some sleep|sleep|ğŸ’¤"

    actions:
      - match: ^(sleep|rest|tired|ğŸ’¤)$
        then:
          reply: You get a good nightâ€™s rest.
          goto: entrance

      - match: sleep
        then:
          reply: You get a good nightâ€™s rest.
          goto: entrance

  # -------- entrance --------------
  - name: entrance
    states:
      - name: default
        imageUrl: asylum/shots/slice/ext-woman.jpg
        long: "
          Saturday morning, you arrive at the venue and are greeted by a female host wearing a white lab coat.
          After placing your belongings in a locker, you are led down a long hallway to a simple bedroom.
          In the game, you will play the role of a male inmate of Bell Hill.

          \n Your goal is to escape the asylum."
        buttons:
          - ask host about game | ask |ğŸ‘©ğŸ¼â€âš•ï¸

    actions:
      # ask is a special command that gets converted to say
      - match: ask|about game|ğŸ‘©ğŸ¼â€âš•ï¸
        then:
          imageUrl: asylum/shots/slice/cell-woman.jpg
          reply: "The host informs you the game will last one hour, followed by a short debrief.
            \nIf you are ever stuck or want to leave, just say the safe word:
            \n> _macaroni_
            \nShe wishes you good luck and exits through the door by which you came.
            \n It closes seamlessly, becoming part of a blank wall of the room."
          buttons:
            - look around | cont|ğŸ”

      - match: look around|cont|ğŸ”
        then:
          reply: You have just begun to examine your surroundings when the *real* door of the room opens, and two burly men dressed as what you take to be orderlies enter.
          goto: orderlies

      - match: macaroni
        then:
          reply: You haven't started yet!
          buttons:
            - Continue | cont | â–¶ï¸

  # -------- orderlies --------------
  - name: orderlies
    states:
      - name: default
        imageUrl: asylum/shots/slice/orderlies.jpg
        long: Before you can speak, one of the orderlies locks you in bear-like grip while the other strips your pants off your legs.
          Your shirt is torn off next, leaving you only in your underwear and socks.
        buttons:
          - ask orderlies about your clothes | cont|ğŸ‘¨â€âš•ï¸

    actions:
      # catch both inputs here anyway
      - match: (ğŸ‘¨â€âš•ï¸|tell|cont|stop|ask|â–¶ï¸)
        then:
          reply: "
            \n_â€œIs this part of the game?!â€_ you stammer angrily.

            \n_â€œItâ€™s all in the terms and conditions,â€_ says the first orderly.

            \n _â€œLooking forward to your escape attempts!â€_ chuckles the other, following his partner out.

            \n_â€œGeesh,â€_ you think, _â€œThatâ€™s maybe a bit muchâ€¦â€_

            \nThe door shuts with a resounding click.
            "
          goto: cell
          # buttons:
          #   - look around | cell

      - match: cell|look|look around
        then:
          goto: cell
