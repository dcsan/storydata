rooms:
  - name: lobby
    states:
      - name: default
        long: you're in a patient's cell

    actions:
      - match: sesame
        always:
          reply: You shout "sesame" to the room
        then:
          reply: The door opens
          setProps:
            - door.state = open

      - match: open wardrobe
        if:
          all:
            - clothes.wearing = true
        then:
          setProps:
            - wardrobe.state = openEmpty
        else:
          setProps:
            - wardrobe.state = openFull

      - match: close wardrobe
        then:
          setProps:
            - wardrobe.state = closed

      - match: get clothes
        if:
          all:
            - wardrobe.state = openFull
            - clothes.wearing = false
        then:
          reply: You put on the clothes
          setProps:
            - wardrobe.state = empty
            - clothes.wearing = true
        else:
          reply: You'll have to open the wardrobe first.

    items:
      # door
      - name: door
        state: locked
        states:
          - name: locked
            short: The door is tightly locked
          - name: open
            short: The door has opened up, time to make a break for it.

      - name: wardrobe
        state: closed
        canTake: false
        states:
          - name: closed
            short: The wardrobe is closed
          - name: openEmpty
            short: The wardrobe is open but there's nothing inside
          - name: openFull
            short: You see some clothes inside the open wardrobe

      - name: clothes
        called: robe|gown
        states:
          - name: default
            short: An old dressing gown
          - name: wearing
            short: you're wearing them

      - name: soap
        called: soap|bar of soap
        canTake: true
        states:
          - name: default
            short: time for a good scrubbing! Better follow procedure.

      # item you cannot get
      - name: table
        canTake: false
        states:
          - name: default
            short: A big wooden table

      - name: lighter
        states:
          - name: default
            short: this has a custom get action
